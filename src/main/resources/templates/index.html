<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="layout :: site-head">
</head>
<body>
<h1>this is HOME</h1>
<header th:replace="layout :: site-header"></header>
<main>
<p>this is for admins only</p>
<a href="/admin/addPost">add post</a>
<p>this is for admins only</p> <br><br>

<div id="posts">
<tr th:each="p : ${posts}">
<hr>	

			<div>

				
				<h2 style="margin-bottom:0px; "  id="postTitle"><a th:href="@{/posts/{postID} (postID=${p.id})}"><td th:text="${p.title}"></td></a></h2>
				
				<p id="date" ><td th:text="${p.datePosted}"></td></p>
				<p>
					<td th:text="${p.content}"></td>
				</p>
				

			</div>
			<a th:href="@{/posts/{postID} (postID=${p.id})}"><i class="far fa-comments"></i><td th:text="${commentCount}"></td> comments</a>

			<div sec:authorize="hasAuthority('ADMIN')">
			<form onsubmit="return confirm('Do you really want to delete this post? \n' + document.getElementById('postTitle').innerHTML);" th:action="@{/admin/removePost/{postID} (postID=${p.id})}" method="get" >
				<button type="submit" class="faButton">
  	  				<i class="fas fa-times-circle"></i>
				</button>
			</form>
			
			<form th:action="@{/admin/editpost/{postID} (postID=${p.id})}" method="get" >
			<button type="submit" class="faButton">
  	  				<i class="fas fa-pencil-alt"></i>
				</button>
			</form>
			
			</div>
			
		</tr>
		</div>
	</main>	
</body>
</html>